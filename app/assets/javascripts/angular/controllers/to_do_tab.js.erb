app.controller("ToDoCtrl", ToDoCtrl)

ToDoCtrl.$inject = ['ToDoFactory', '$scope', '$stateParams']

function ToDoCtrl(ToDoFactory, $scope, $stateParams) {
  console.log('To Do Controller')

  var ToDoList = ToDoFactory;

  // Show all task in selected event
  $scope.allTasks = ToDoList.query({eventId: $stateParams.id})

  // Create New Event
  $scope.newTask = {};

  $scope.addTask = function() {
    console.log('click')

    ToDoList.save({eventId: $stateParams.id}, $scope.newTask, function(newTask) {
      $scope.allTasks.push(newTask);
      $scope.newTask = {}
    });
  };

  // Delete Task
  $scope.deleteTask= function(id) {
    ToDoList.delete({eventId: $stateParams.id, id: id});
    var index = $scope.allTasks.indexOf(event);
    $scope.allTasks.splice(index, 1);
  }


}
